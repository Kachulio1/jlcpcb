<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIY 3-Axis CNC Plotter Project - JLCPCB</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>DIY 3-Axis CNC Plotter Using DC Motors with Optical Encoders</h1>
        <p class="subtitle">A project powered by JLCPCB</p>
    </header>

    <div class="table-of-contents">
        <h2>Contents</h2>
        <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#parts-list">Parts List</a></li>
            <li><a href="#circuit-details">Circuit Details</a></li>
            <li><a href="#arduino-code">Arduino Code</a></li>
            <li><a href="#calibration">Calibration</a></li>
            <li><a href="#inkscape-guide">Inkscape Guide</a></li>
            <li><a href="#ugs-guide">UGS Guide</a></li>
            <li><a href="#troubleshooting">Troubleshooting</a></li>
            <li><a href="#example-gcode">Example G-code</a></li>
        </ul>
    </div>

    <article>
        <section id="introduction">
            <h2>Introduction</h2>
            <div id="introduction-content" class="article-content"></div>
        </section>

        <section id="parts-list">
            <h2>Parts List</h2>
            <div id="parts-list-content" class="article-content"></div>
        </section>

        <section id="circuit-details">
            <h2>Circuit Details</h2>
            <div id="circuit-details-content" class="article-content"></div>
        </section>

        <section id="arduino-code">
            <h2>Arduino Code</h2>
            <div id="arduino-code-content" class="article-content"></div>
        </section>

        <section id="calibration">
            <h2>Calibration Guide</h2>
            <div id="calibration-content" class="article-content"></div>
        </section>

        <section id="inkscape-guide">
            <h2>Inkscape Guide</h2>
            <div id="inkscape-guide-content" class="article-content"></div>
        </section>

        <section id="ugs-guide">
            <h2>Universal G-code Sender Guide</h2>
            <div id="ugs-guide-content" class="article-content"></div>
        </section>

        <section id="troubleshooting">
            <h2>Troubleshooting</h2>
            <div id="troubleshooting-content" class="article-content"></div>
        </section>

        <section id="example-gcode">
            <h2>Example G-code</h2>
            <div class="article-content">
                <p>Here are some example G-code files you can use with your CNC plotter:</p>
                <ul>
                    <li><a href="example-gcode/test-circle.gcode">Test Circle</a></li>
                    <li><a href="example-gcode/test-square.gcode">Test Square</a></li>
                    <li><a href="example-gcode/jlcmc-logo.gcode">JLCMC Logo</a></li>
                    <li><a href="example-gcode/complete-test-pattern.gcode">Complete Test Pattern</a></li>
                </ul>
            </div>
        </section>
    </article>

    <footer>
        <p>This project is made possible with PCB manufacturing by <a href="https://jlcpcb.com" target="_blank">JLCPCB</a></p>
        <p>&copy; <span id="current-year"></span> - All rights reserved</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="script.js"></script>
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // Load full markdown content for article format
        function loadMarkdownContent() {
            const sections = [
                {id: 'introduction-content', file: 'README.md'},
                {id: 'parts-list-content', file: 'parts-list.md'},
                {id: 'circuit-details-content', file: 'circuit-details.md'},
                {id: 'arduino-code-content', file: 'arduino-code.md'},
                {id: 'calibration-content', file: 'calibration-guide.md'},
                {id: 'inkscape-guide-content', file: 'inkscape-guide.md'},
                {id: 'ugs-guide-content', file: 'ugs-guide.md'},
                {id: 'troubleshooting-content', file: 'troubleshooting.md'}
            ];
            
            // Load and render complete content using marked.js
            sections.forEach(section => {
                const element = document.getElementById(section.id);
                if (element) {
                    fetch(section.file)
                        .then(response => response.text())
                        .then(text => {
                            // Remove first heading (title) as we already have it in the section heading
                            const withoutFirstTitle = text.replace(/^#.*\n/, '');
                            element.innerHTML = marked.parse(withoutFirstTitle);
                        })
                        .catch(error => {
                            console.error('Error loading markdown:', error);
                            element.innerHTML = '<p>Error loading content. Please try again later.</p>';
                        });
                }
            });
        }
        
        window.addEventListener('load', loadMarkdownContent);
    </script>
</body>
</html>
